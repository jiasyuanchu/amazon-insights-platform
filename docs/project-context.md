# Amazon 商業智慧平台 - 專案背景

## 產品定位
B2B SaaS 系統，為 Amazon 賣家提供商業智慧洞察、競爭分析與優化建議

## 核心價值主張
通過數據驅動幫助品牌賣家提升營收、降低風險、搶佔市場先機

## 核心用戶與需求

### 用戶角色矩陣

| 核心功能 | Primary User | Secondary User | 關鍵需求 | 使用頻率 |
|---------|-------------|----------------|----------|----------|
| 追蹤產品表現 | Sales Manager | Supply Chain Manager | BSR趨勢、評分變化、銷售數據 | 每日監控 |
| 分析競爭對手 | Insight Manager | Brand/Marketing Manager | 競品動態、價格比較、市場定位 | 每週深度分析 |
| 提供優化建議 | Brand/Marketing Manager | Sales Manager | Listing優化、定價策略、ROI提升 | 每小時監控，每日調整 |

### 核心功能詳細對應

#### 選項 1：產品資料追蹤系統

| 用戶角色 | 優先級 | 核心價值 | 具體應用場景 |
|---------|--------|----------|-------------|
| Sales Manager | 主要 🔴 | 實時掌握產品表現，快速應對市場變化 | 監控BSR排名變動、追蹤評分評論趨勢、價格異常警報響應 |
| Supply Chain Manager | 次要 🟡 | 價格變動影響補貨與庫存決策 | 價格變動>10%時評估庫存策略、Buy Box價格變化影響補貨時機 |
| Brand/Marketing Manager | 輔助 🟢 | 了解產品市場表現為廣告策略提供參考 | 廣告投放效果驗證、ROI計算基礎數據、即時廣告成本監控 |
| Insight Manager | 輔助 🟢 | 產品表現數據作為分析基礎 | 市場趨勢分析的基礎數據 |

#### 選項 2：競品分析引擎

| 用戶角色 | 優先級 | 核心價值 | 具體應用場景 |
|---------|--------|----------|-------------|
| Insight Manager | 主要 🔴 | 深度競爭情報分析與策略制定 | 競爭定位報告生成、市場份額分析、競品特色對比分析 |
| Brand/Marketing Manager | 次要 🟡 | 競品分析支撐品牌定位與廣告策略 | 差異化賣點提煉、廣告文案靈感來源、定價策略參考 |
| Sales Manager | 輔助 🟢 | 了解競爭環境制定銷售策略 | 產品組合調整參考、促銷活動策劃 |
| Supply Chain Manager | 無關 ⚪ | - | - |

#### 選項 3：Listing 優化建議生成器

| 用戶角色 | 優先級 | 核心價值 | 具體應用場景 |
|---------|--------|----------|-------------|
| Brand/Marketing Manager | 主要 🔴 | 直接提升廣告ROI與轉換率 | 標題關鍵詞優化、產品描述改進、圖片策略建議、每小時ACOS監控、每日出價調整 |
| Sales Manager | 次要 🟡 | 產品頁面優化提升銷售表現 | 轉換率提升策略、產品賣點突出 |
| Insight Manager | 輔助 🟢 | AI建議作為策略分析的參考 | 優化效果追蹤分析、A/B測試結果分析 |
| Supply Chain Manager | 無關 ⚪ | - | - |

### 用戶規模估算

| 用戶角色 | 人數 | 主要使用功能 | 使用特性 |
|---------|------|-------------|----------|
| Sales Manager | 400人 | 產品追蹤 | 高頻監控，分散訪問 |
| Brand/Marketing Manager | 300人 | 優化建議 | 中頻查詢，週期性檢查 |
| Supply Chain Manager | 200人 | 產品追蹤 | 高頻監控，集中時段 |
| Insight Manager | 100人 | 競品分析 | 低頻深度分析 |
| **總用戶數** | **1000人** | | |

### 各功能模塊總請求量

| 功能模塊 | 總請求量/日 | 平均QPS | 工作時間QPS | 峰值QPS |
|---------|------------|---------|------------|---------|
| 產品追蹤系統 | 10,000-20,000 | 0.12-0.23 | 0.4-0.7 | 1-2 |
| 優化建議生成器 | 5,000-10,000 | 0.06-0.12 | 0.2-0.4 | 0.5-1 |
| 競品分析引擎 | 300-500 | 0.003-0.006 | 0.01-0.02 | 0.05-0.1 |
| **系統總計** | **15,300-30,500** | **0.18-0.35** | **0.6-1.1** | **1.5-3** |

### 各功能詳細使用模式分析

#### 選項 1：產品資料追蹤系統 - 高頻使用

| 使用場景 | 頻率 | 單次請求數 | 日總請求估算 |
|---------|------|-----------|-------------|
| 儀表板檢視 | 每小時2-3次 | 5-8個API | 8,000-12,000 |
| 產品列表刷新 | 每30分鐘 | 2-3個API | 3,000-4,000 |
| 異常警報查詢 | 被動觸發 | 3-5個API | 1,000-2,000 |
| 歷史趨勢查詢 | 每日2-3次 | 5-10個API | 2,000-3,000 |
| **小計** | | | **14,000-21,000** |

#### 選項 2：競品分析引擎 - 低頻深度使用

| 使用場景 | 頻率 | 單次請求數 | 日總請求估算 |
|---------|------|-----------|-------------|
| 競品概覽查詢 | 每日1-2次 | 3-5個API | 150-250 |
| 深度比較分析 | 每週2-3次 | 10-15個API | 40-80 |
| 報告生成 | 每週1次 | 15-25個API | 30-50 |
| 趨勢對比查詢 | 每週1-2次 | 5-8個API | 20-40 |
| **小計** | | | **240-420** |

#### 選項 3：Listing 優化建議生成器 - 中高頻使用

| 使用場景 | 頻率 | 單次請求數 | 日總請求估算 |
|---------|------|-----------|-------------|
| ACOS監控 | 每小時1-2次 | 3-5個API | 2,000-3,000 |
| 優化建議查詢 | 每日3-5次 | 8-12個API | 1,500-2,500 |
| A/B測試驗證 | 每日1-2次 | 5-8個API | 800-1,200 |
| 關鍵詞分析 | 每日2-3次 | 4-6個API | 1,200-1,800 |
| **小計** | | | **5,500-8,500** |

### 性能要求分級

| API類型 | 響應時間要求 | 快取策略 | 並發要求 |
|---------|-------------|----------|----------|
| **高頻查詢類** | < 200ms (90th) | Redis 5-30分鐘 | 支援 2-5 併發 |
| 儀表板數據 | < 100ms | 極高快取命中率 | 高 |
| 產品列表 | < 200ms | 分頁+快取 | 中 |
| 實時價格 | < 150ms | Redis快取 | 高 |
| **中頻計算類** | < 2s (90th) | 30分鐘-2小時 | 支援 1-2 併發 |
| 優化建議摘要 | < 500ms | 30分鐘快取 | 中 |
| 詳細分析 | < 2s | 背景預計算 | 低 |
| AI建議生成 | < 3s | 非同步處理 | 低 |
| **低頻深度類** | < 5s (90th) | 2-24小時 | 單一請求處理 |
| 競品概覽 | < 500ms | 每小時更新 | 低 |
| 深度比較 | < 5s | 複雜計算 | 低 |
| 報告生成 | < 10s | 可非同步 | 低 |

### 系統資源需求

| 資源類型 | 規格需求 | 說明 |
|---------|----------|------|
| 服務器 | 2-4 vCPU, 4-8GB RAM | 低併發，重點在穩定性 |
| 背景任務處理 | 4-8 vCPU, 8-16GB RAM | 數據採集+AI分析為主要負載 |
| 資料庫 | 4 vCPU, 8-16GB RAM | 讀多寫少，時間序列優化 |
| Redis快取 | 2 vCPU, 4-8GB RAM | 中等快取需求 |
| 儲存空間 | 100GB起步 | 年增長 50-100GB |

### 數據更新延遲要求

| 數據類型 | 更新延遲要求 | 對應功能 | 業務影響 |
|---------|-------------|----------|----------|
| **即時級（< 5分鐘）** | | | |
| 價格異常警報 | < 5分鐘 | 產品追蹤 | 競爭響應速度 |
| 庫存斷貨警報 | < 5分鐘 | 產品追蹤 | 避免銷售損失 |
| **準即時級（< 30分鐘）** | | | |
| 產品價格變動 | < 30分鐘 | 產品追蹤、競品分析 | 定價策略調整 |
| BSR排名變化 | < 30分鐘 | 產品追蹤 | 銷售表現監控 |
| Buy Box狀態 | < 30分鐘 | 產品追蹤 | 競爭地位掌握 |
| **小時級（< 2小時）** | | | |
| 評分評論更新 | < 2小時 | 產品追蹤 | 客戶滿意度監控 |
| 競品動態分析 | < 2小時 | 競品分析 | 競爭策略制定 |
| 廣告數據同步 | < 1小時 | 優化建議 | ROI優化調整 |
| **日級（< 24小時）** | | | |
| 深度競品分析 | < 24小時 | 競品分析 | 戰略決策支持 |
| 市場趨勢報告 | < 24小時 | 競品分析 | 長期規劃 |
| 優化建議更新 | < 12小時 | 優化建議 | 持續改進建議 |

### 系統可用性與容災要求

| 指標類型 | 要求 | 說明 | 業務影響 |
|---------|------|------|----------|
| 系統可用性 | 99.9% | 月停機 < 45分鐘 | B2B服務標準，維護客戶信任 |
| 核心功能可用性 | 99.95% | 產品追蹤功能月停機 < 22分鐘 | 避免錯失關鍵市場變化 |
| 數據恢復點 (RPO) | < 1小時 | 最多丟失1小時數據 | 歷史趨勢分析容錯範圍 |
| 恢復時間 (RTO) | < 15分鐘 | 故障後15分鐘內恢復服務 | 減少業務中斷影響 |

### 安全性要求

| 安全層級 | 實現方式 | 作用範圍 | 安全強度 |
|---------|----------|----------|----------|
| 用戶認證 | OAuth 2.0 + JWT | 所有API端點 | MFA可選 |
| API授權 | RBAC權限控制 | 功能級別權限 | 細粒度控制 |
| 資料訪問控制 | 租戶隔離 | 品牌資料分離 | 完全隔離 |
| API安全 | Rate Limiting + API Key | 防止濫用 | 分級限流 |

### 數據採集合規性

| 合規類型 | 具體要求 | 實現方式 |
|---------|----------|----------|
| API使用合規 | 遵守Firecrawl服務條款 | 服務條款約束 |
| API調用限流 | 控制調用頻率避免超限 | 智慧限流策略 |
| API密鑰安全 | 保護API Key不被洩露 | 加密存儲管理 |
| 數據使用合規 | 僅用於合法商業分析 | 使用條款約束 |
| 調用審計追蹤 | 記錄所有API調用行為 | 完整日誌記錄 |

## 成本優化重點

- 重點不在高併發架構，而在數據處理效率
- 數據採集穩定性比API併發能力更重要
- 快取策略可大幅降低外部API調用成本
- 背景任務優化是性能關鍵

## 系統架構設計

詳細的系統架構設計請參考：

- **整體架構**: [docs/architecture/system-overview.md](architecture/system-overview.md)
- **數據流向**: [docs/architecture/data-flow.md](architecture/data-flow.md)  
- **部署架構**: [docs/architecture/deployment.md](architecture/deployment.md)

### 架構摘要

- **5層架構**: 前端層 → API層 → 業務服務層 → 數據處理層 → 基礎設施層
- **核心技術棧**: FastAPI + PostgreSQL + Redis + Celery + Firecrawl API + OpenAI API
- **設計原則**: 數據採集穩定性 > 高併發、快取優先、異步處理